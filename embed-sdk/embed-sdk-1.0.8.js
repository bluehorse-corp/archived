function _assert_this_initialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _class_call_check(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _construct(t,e,r){return(_construct=_is_native_reflect_construct()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);e=new(Function.bind.apply(t,n));return r&&_set_prototype_of(e,r.prototype),e}).apply(null,arguments)}function _define_property(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _get_prototype_of(t){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_set_prototype_of(t,e)}function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _is_native_function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function _object_spread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);(n="function"==typeof Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})):n).forEach(function(t){_define_property(e,t,r[t])})}return e}function ownKeys(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function _object_spread_props(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}function _possible_constructor_return(t,e){return!e||"object"!==_type_of(e)&&"function"!=typeof e?_assert_this_initialized(t):e}function _set_prototype_of(t,e){return(_set_prototype_of=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _type_of(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function _wrap_native_super(t){var r="function"==typeof Map?new Map:void 0;return(_wrap_native_super=function(t){if(null===t||!_is_native_function(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return _construct(t,arguments,_get_prototype_of(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),_set_prototype_of(e,t)})(t)}function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function _create_super(r){var n=_is_native_reflect_construct();return function(){var t,e=_get_prototype_of(r);return _possible_constructor_return(this,n?(t=_get_prototype_of(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function isUrl(t){try{return new URL(t),!0}catch(t){return!1}}function encodeData(r){var t=Object.keys(r).filter(function(t){t=r[t];return"string"==typeof t&&isUrl(t)}).reduce(function(t,e){return _object_spread_props(_object_spread({},t),_define_property({},e,encodeURIComponent(r[e])))},{});return _object_spread({},r,t)}var $__BASE_URL="https://poomang.com",$__DEV_URL="https://dev.mangdyssey.com",$__LOCAL_URL="http://localhost:3000";function getHost(t){switch(t.toUpperCase()){case"LOCAL":return $__LOCAL_URL;case"DEVELOPMENT":return $__DEV_URL;default:return $__BASE_URL}}var ParseError=function(){"use strict";_inherits(e,_wrap_native_super(Error));var t=_create_super(e);function e(){return _class_call_check(this,e),t.apply(this,arguments)}return e}();function parseData(t){try{return"string"==typeof t.data?JSON.parse(t.data):t.data}catch(t){throw new ParseError}}function createPoomangEmbed(){var s,p=null;return{container:null,init:function(t,e){var r=e.slug,n=e.resultId,o=e.showShareButton,o=void 0!==o&&o,c=e.data,i=e.environment,i=void 0===i?"production":i,a=e.onMessage,u=e.ignoreDefaultListener;if(!(p=document.getElementById(t)))throw new Error("id가 '".concat(t,"'인 iframe을 찾을 수 없습니다."));e="".concat(getHost(i),"/t/").concat(r).concat(n?"/result/".concat(n):""),t=new URLSearchParams(location.search);t.set("showShareButton","".concat(o)),t.set("domain",location.origin),t.set("embeded_script","true"),c&&t.set("data",JSON.stringify(encodeData(c))),s="".concat(e,"?").concat(t.toString()),p.setAttribute("src",s),window.addEventListener("message",function(e){try{var t=parseData(e);null!=a&&a(t),u||("completeGame"===t.event?window.history.pushState(void 0,"","/".concat(r,"/result/").concat(t.data.resultId)):"retry"===t.event&&window.history.pushState(void 0,"","/".concat(r)))}catch(t){throw _instanceof(t,ParseError)&&console.error("Event.data can not parse",e.data),t}})}}}var initScriptName="";!function(){var e=null==(e=document.currentScript)?void 0:e.getAttribute("src");if(e)try{var r=new URL(e);initScriptName=r.searchParams.get("onload")||""}catch(t){initScriptName=null==(e=null==(r=e.split("?").slice(-1)[0])?void 0:r.split("&").filter(function(t){return t.includes("onload=")})[0])?void 0:e.replace("onload=","")}}(),document.addEventListener("DOMContentLoaded",function(){window["poomang.embed"]=createPoomangEmbed();var t=window[initScriptName];null!=t&&t()});