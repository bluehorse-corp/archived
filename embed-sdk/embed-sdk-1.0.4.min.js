function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);(n="function"==typeof Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})):n).forEach(function(t){_defineProperty(e,t,r[t])})}return e}function ownKeys(e,t){var r,n=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)),n}function _objectSpreadProps(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}var $__BASE_URL="https://poomang.com",$__DEV_URL="https://dev.mangdyssey.com",$__LOCAL_URL="http://localhost:3000",initScriptName="";function checkUrl(t){try{return new URL(t),!0}catch(t){return!1}}function getHost(t){switch(t.toUpperCase()){case"LOCAL":return $__LOCAL_URL;case"DEVELOPMENT":return $__DEV_URL;default:return $__BASE_URL}}function encodeData(r){var t=Object.keys(r).filter(function(t){t=r[t];return"string"==typeof t&&checkUrl(t)}).reduce(function(t,e){return _objectSpreadProps(_objectSpread({},t),_defineProperty({},e,encodeURIComponent(r[e])))},{});return _objectSpread({},r,t)}!function(){var e=null==(e=document.currentScript)?void 0:e.getAttribute("src");if(e)try{var r=new URL(e);initScriptName=r.searchParams.get("onload")||""}catch(t){initScriptName=null==(e=null==(r=e.split("?").slice(-1)[0])?void 0:r.split("&").filter(function(t){return t.includes("onload=")})[0])?void 0:e.replace("onload=","")}}(),document.addEventListener("DOMContentLoaded",function(){window["poomang.embed"]={container:d=null,init:function(t,e){var r=e.slug,n=e.resultId,o=e.showShareButton,o=void 0!==o&&o,c=e.data,a=e.environment,a=void 0===a?"production":a,i=e.onMessage,u=e.ignoreDefaultListener;if(!(d=document.getElementById(t)))throw new Error("id가 '".concat(t,"'인 iframe을 찾을 수 없습니다."));e="".concat(getHost(a),"/t/").concat(r).concat(n?"/".concat(n):""),t=new URLSearchParams(location.search);t.set("showShareButton","".concat(o)),t.set("domain",location.origin),t.set("embeded_script","true"),c&&t.set("data",JSON.stringify(encodeData(c))),s="".concat(e,"?").concat(t.toString()),d.setAttribute("src",s),window.addEventListener("message",function(e){try{var t="string"==typeof e.data?JSON.parse(e.data):e.data;if(null!=i&&i(t),u)return;if("completeGame"===t.event)return void window.history.pushState(void 0,"","/".concat(r,"/result/").concat(t.data.resultId));if("retry"===t.event)return void window.history.pushState(void 0,"","/".concat(r))}catch(t){console.error("Event.data can not parse",e.data)}})}};var s,d,t=initScriptName,t=window[t];null!=t&&t()});