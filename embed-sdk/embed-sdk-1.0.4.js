function _defineProperty(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){_defineProperty(t,e,r[e])})}return t}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e){n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}r.push.apply(r,n)}return r}function _objectSpreadProps(t,r){r=r!=null?r:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var $__BASE_URL="https://poomang.com";var $__DEV_URL="https://dev.mangdyssey.com";var $__LOCAL_URL="http://localhost:3000";var initScriptName="";(function(){var e;var t=(e=document.currentScript)===null||e===void 0?void 0:e.getAttribute("src");if(t){try{var r=new URL(t);initScriptName=r.searchParams.get("onload")||""}catch(e){var n,o;initScriptName=(o=(n=t.split("?").slice(-1)[0])===null||n===void 0?void 0:n.split("&").filter(function(e){return e.includes("onload=")})[0])===null||o===void 0?void 0:o.replace("onload=","")}}})();function checkUrl(e){try{new URL(e);return true}catch(e){return false}}function getHost(e){switch(e.toUpperCase()){case"LOCAL":return $__LOCAL_URL;case"DEVELOPMENT":return $__DEV_URL;default:return $__BASE_URL}}function encodeData(r){var e=Object.keys(r).filter(function(e){var t=r[e];return typeof t==="string"&&checkUrl(t)}).reduce(function(e,t){return _objectSpreadProps(_objectSpread({},e),_defineProperty({},t,encodeURIComponent(r[t])))},{});return _objectSpread({},r,e)}document.addEventListener("DOMContentLoaded",function(){window["poomang.embed"]=function(){var v=null;var y="";return{container:v,init:function e(t,r){var n=r.slug,o=r.resultId,c=r.showShareButton,a=c===void 0?false:c,i=r.data,u=r.environment,s=u===void 0?"production":u,d=r.onMessage,l=r.ignoreDefaultListener;v=document.getElementById(t);if(!v){throw new Error("id가 '".concat(t,"'인 iframe을 찾을 수 없습니다."))}var f="".concat(getHost(s),"/t/").concat(n).concat(o?"/".concat(o):"");var p=new URLSearchParams(location.search);p.set("showShareButton","".concat(a));p.set("domain",location.origin);p.set("embeded_script","true");if(i){p.set("data",JSON.stringify(encodeData(i)))}y="".concat(f,"?").concat(p.toString());v.setAttribute("src",y);window.addEventListener("message",function(t){try{var e=typeof t.data==="string"?JSON.parse(t.data):t.data;d===null||d===void 0?void 0:d(e);if(l){return}if(e.event==="completeGame"){window.history.pushState(undefined,"","/".concat(n,"/result/").concat(e.data.resultId));return}if(e.event==="retry"){window.history.pushState(undefined,"","/".concat(n));return}}catch(e){console.error("Event.data can not parse",t.data)}})}}}();var e=initScriptName;var t=window[e];t===null||t===void 0?void 0:t()});