function _define_property(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _object_spread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);(n="function"==typeof Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})):n).forEach(function(e){_define_property(t,e,r[e])})}return t}function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _object_spread_props(t,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}function isUrl(e){try{return new URL(e),!0}catch(e){return!1}}function encodeData(r){var e=Object.keys(r).filter(function(e){e=r[e];return"string"==typeof e&&isUrl(e)}).reduce(function(e,t){return _object_spread_props(_object_spread({},e),_define_property({},t,encodeURIComponent(r[t])))},{});return _object_spread({},r,e)}var $__BASE_URL="https://poomang.com",$__DEV_URL="https://dev.mangdyssey.com",$__LOCAL_URL="http://localhost:3000";function getHost(e){switch(e.toUpperCase()){case"LOCAL":return $__LOCAL_URL;case"DEVELOPMENT":return $__DEV_URL;default:return $__BASE_URL}}function createPoomangEmbed(){var u,p=null;return{container:null,init:function(e,t){var r=t.slug,n=t.resultId,o=t.showShareButton,o=void 0!==o&&o,c=t.data,a=t.environment,a=void 0===a?"production":a,s=t.onMessage,i=t.ignoreDefaultListener;if(!(p=document.getElementById(e)))throw new Error("id가 '".concat(e,"'인 iframe을 찾을 수 없습니다."));t="".concat(getHost(a),"/t/").concat(r).concat(n?"/result/".concat(n):""),e=new URLSearchParams(location.search);e.set("showShareButton","".concat(o)),e.set("domain",location.origin),e.set("embeded_script","true"),c&&e.set("data",JSON.stringify(encodeData(c))),u="".concat(t,"?").concat(e.toString()),p.setAttribute("src",u),window.addEventListener("message",function(t){try{var e="string"==typeof t.data?JSON.parse(t.data):t.data;null!=s&&s(e),i||("completeGame"===e.event?window.history.pushState(void 0,"","/".concat(r,"/result/").concat(e.data.resultId)):"retry"===e.event&&window.history.pushState(void 0,"","/".concat(r)))}catch(e){console.error("Event.data can not parse",t.data)}})}}}export{createPoomangEmbed,createPoomangEmbed as default};